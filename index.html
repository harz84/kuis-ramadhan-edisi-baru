<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kuis Ngabuburit Ramadhan 1447 H</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    
    <style>
        * { box-sizing: border-box; }
        
        html, body { 
            height: 100%; margin: 0; padding: 0; 
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
        }

        /* --- BACKGROUND ANIMASI GRADIENT MODERN --- */
        body {
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            background: linear-gradient(-45deg, #0f3e33, #155d4c, #0a2e3f, #1f2b38);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #ffffff;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- GLASSMORPHISM GAME AREA --- */
        #gameArea {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px; 
            padding: 40px 20px 30px 20px; 
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3); 
            text-align: center; 
            max-width: 800px; 
            width: 90%; 
            position: relative;
        }

        /* --- TIMER --- */
        #timerContainer { 
            display: flex; justify-content: center; align-items: center; margin-bottom: 20px; 
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50px;
            padding: 5px 20px;
            display: inline-flex;
        }
        #timerIcon { width: 30px; height: 30px; margin-right: 10px; filter: brightness(0) invert(1); }
        #timer { font-size: 32px; font-weight: 700; color: #fff; letter-spacing: 2px; }
        
        .pulse-danger { animation: pulseRed 1s infinite; color: #ff6b6b !important; }
        @keyframes pulseRed { 0% { transform: scale(1); } 50% { transform: scale(1.1); text-shadow: 0 0 10px red; } 100% { transform: scale(1); } }

        /* --- TYPOGRAPHY --- */
        #judulGame { 
            font-size: 36px; color: #F5D061; margin-bottom: 15px; font-weight: 700; 
            text-shadow: 2px 2px 8px rgba(0,0,0,0.4); 
            line-height: 1.3;
        }
        #petunjuk { font-size: 20px; margin-bottom: 25px; line-height: 1.6; font-weight: 400; color: #eef; }

        /* --- ANIMASI TRANSISI SOAL --- */
        .fade-in-up { animation: fadeInUp 0.6s ease forwards; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- TOMBOL PILIHAN GANDA (MODERN) --- */
        #pilihanGanda { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
        #pilihanGanda button {
            font-family: 'Poppins', sans-serif; 
            font-size: 16px; 
            padding: 15px 20px; 
            border: 1px solid rgba(255, 255, 255, 0.3); 
            border-radius: 12px; 
            background: rgba(255, 255, 255, 0.85); 
            color: #1a2a26; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            text-align: left; 
            line-height: 1.4;
            font-weight: 600;
        }
        #pilihanGanda button:hover { 
            background: #ffffff; 
            transform: translateY(-3px) scale(1.02); 
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); 
        }
        #pilihanGanda button.salah { background-color: #ff6b6b !important; color: white; animation: shake 0.5s; border: none; }
        #pilihanGanda button.benar { background-color: #51cf66 !important; color: white; border: none; }

        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }

        /* --- INPUT & TOMBOL MULAI --- */
        #namaPeserta {
            padding: 15px; margin-bottom: 25px; font-size: 16px; border-radius: 12px; 
            border: 2px solid transparent; width: 85%; max-width: 320px; text-align: center;
            background: rgba(255,255,255,0.9); font-family: 'Poppins', sans-serif;
            outline: none; transition: 0.3s;
        }
        #namaPeserta:focus { border: 2px solid #F5D061; box-shadow: 0 0 15px rgba(245, 208, 97, 0.5); background: #ffffff; }
        
        #startButton { 
            font-size: 20px; padding: 14px 35px; border: none; border-radius: 50px; 
            background: linear-gradient(135deg, #F5D061, #e6b12c); color: #1a2a26; 
            cursor: pointer; font-weight: bold; transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 208, 97, 0.4); text-transform: uppercase; letter-spacing: 1px;
        }
        #startButton:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(245, 208, 97, 0.6); }

        #bismillah { font-size: 16px; color: rgba(255,255,255,0.6); margin-top: 20px; font-style: italic; letter-spacing: 2px;}
        
        #hasil { font-size: 24px; margin-top: 15px; font-weight: bold; min-height: 36px; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
        
        #skor { position: absolute; bottom: -40px; right: 0; left: 0; font-size: 16px; font-weight: bold; color: rgba(255,255,255,0.8); text-align: center;}
        #skorBenar { color: #51cf66; }
        #skorSalah { color: #ff6b6b; }

        #copyright { position: fixed; bottom: 10px; right: 15px; font-size: 12px; color: rgba(255,255,255,0.5); z-index: 1100; }

        #correctAnimation, #wrongAnimation { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200px; height: 200px; display: none; z-index: 1050; pointer-events: none; }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            #judulGame { font-size: 28px; }
            #petunjuk { font-size: 16px; }
            #pilihanGanda button { font-size: 14px; padding: 12px 15px; }
            #gameArea { padding: 30px 15px 20px 15px; }
        }
    </style>
</head>
<body>
    <div id="gameArea">
        <div id="timerContainer" style="display: none;">
            <img id="timerIcon" src="https://img.icons8.com/ios-filled/50/ffffff/hourglass.png" alt="Hourglass">
            <span id="timer">03:00</span>
        </div>
        
        <div id="startScreen" class="fade-in-up">
            <h1 id="judulGame">Kuis Ngabuburit<br>Ramadhan 1447 H</h1>
            <p id="petunjuk" style="font-size: 18px;">Uji pengetahuan Islam kamu sambil menunggu waktu berbuka puasa!</p>
            
            <input type="text" id="namaPeserta" placeholder="Ketik Nama Anda Di Sini"><br>
            <button id="startButton">Mulai Kuis</button>
            <p id="bismillah">Ô∑Ω</p>
        </div>

        <h1 id="judulGameAktif" class="fade-in-up" style="display: none; font-size: 24px; color: #F5D061; margin-bottom: 20px;"></h1>
        <p id="petunjukSoal" class="fade-in-up" style="display: none;"></p>
        
        <div id="pilihanGanda" class="fade-in-up" style="display: none;">
            </div>
        
        <p id="hasil"></p>
        
        <div id="correctAnimation"></div>
        <div id="wrongAnimation"></div>
        
        <div id="skor" style="display: none;">
            ‚úÖ Benar: <span id="skorBenar">0</span> &nbsp;|&nbsp; ‚ùå Salah: <span id="skorSalah">0</span>
        </div>
    </div>
    
    <div id="copyright">¬© Mas Har 2024</div>

    <script>
        // --- SOAL TERBARU ---
        const dataTebakan = [
            { deskripsi: "Terdapat amalan di bulan Ramadhan yang nilai pahalanya disejajarkan dengan ibadah Haji. Amalan apakah yang dimaksud berdasarkan hadits riwayat Bukhari dan Muslim?", jawaban: "Melaksanakan Umrah di bulan Ramadhan", pilihan: ["I'tikaf di sepuluh malam terakhir", "Memberi makan orang yang berbuka puasa (Tafthir as-Shoim)", "Melaksanakan Umrah di bulan Ramadhan", "Shalat Tarawih berjamaah hingga imam selesai"] },
            { deskripsi: "Seseorang sangat rajin berpuasa Ramadhan dari pagi hingga maghrib, namun ia dengan sengaja meninggalkan shalat wajib 5 waktu. Bagaimana status puasanya?", jawaban: "Puasanya tidak sah (tidak diterima) dan tidak bermanfaat pada hari kiamat", pilihan: ["Puasanya tetap sah, namun ia menanggung dosa besar karena meninggalkan shalat", "Puasanya makruh dan pahalanya berkurang drastis", "Puasanya tidak sah (tidak diterima) dan tidak bermanfaat pada hari kiamat", "Puasanya sah jika ia mengganti (qadha) shalatnya di bulan Syawal"] },
            { deskripsi: "Sering kita mendengar ungkapan di masyarakat bahwa 'Tidurnya orang yang berpuasa adalah ibadah'. Bagaimana tinjauan ilmu hadits terhadap ungkapan ini?", jawaban: "Hadits Dhaif (lemah)", pilihan: ["Hadits Shahih muttafaqun 'alaih", "Hadits Hasan lighairihi", "Hadits Dhaif (lemah)", "Hadits Mauquf dari sahabat"] },
            { deskripsi: "Kapan waktu yang bernilai ibadah bagi seseorang yang tidur di siang hari bulan Ramadhan?", jawaban: "Jika ia tidur dengan niat agar tubuhnya kuat untuk melakukan Qiyamul Lail dan ibadah lainnya", pilihan: ["Jika ia tidur dari pagi hingga sore untuk menghindari maksiat mata", "Jika ia tidur karena kelelahan bekerja mencari nafkah", "Jika ia tidur dengan niat agar tubuhnya kuat untuk melakukan Qiyamul Lail dan ibadah lainnya", "Tidur di bulan Ramadhan secara mutlak adalah ibadah, apapun niatnya"] },
            { deskripsi: "Mengkhususkan ziarah kubur menjelang Ramadhan dan merangkainya dengan doa-doa khusus selama bulan Ramadhan adalah perbuatan yang...", jawaban: "Tidak ada dasar dan tuntunannya dari ajaran Islam", pilihan: ["Dianjurkan (Sunnah) sebagai bentuk pengingat kematian", "Tidak ada dasar dan tuntunannya dari ajaran Islam", "Mubah (Boleh) dilakukan asal tidak meminta-minta kepada kuburan", "Sunnah Muakkadah bagi yang orang tuanya sudah wafat"] },
            { deskripsi: "Menjelang waktu berbuka (sering disebut ngabuburit), banyak orang menyia-nyiakan waktunya untuk hal yang tidak bermanfaat. Padahal, waktu menjelang berbuka memiliki keutamaan, yaitu...", jawaban: "Waktu mustajab untuk berdoa", pilihan: ["Waktu yang paling baik untuk tidur sejenak", "Waktu mustajab untuk berdoa", "Waktu untuk membayar zakat fitrah", "Waktu diturunkannya malaikat Rahmat secara khusus"] },
            { deskripsi: "Saat berdzikir, sangat dianjurkan (disunnahkan) untuk menghitung tasbih menggunakan jari-jemari tangan kanan. Apa hikmah syar'iyah dari anjuran ini berdasarkan sabda Nabi Ô∑∫?", jawaban: "Karena jari-jemari akan ditanyai dan diminta untuk berbicara pada hari kiamat", pilihan: ["Karena jari-jemari akan ditanyai dan diminta untuk berbicara pada hari kiamat", "Karena menghitung dengan jari lebih melatih konsentrasi otak", "Karena penggunaan biji tasbih adalah haram mutlak tanpa pengecualian", "Karena tangan kanan adalah tangan yang digunakan untuk makan"] },
            { deskripsi: "Jika seseorang merutinkan membaca Ayat Kursi setiap selesai shalat fardhu, keutamaan agung apa yang dijanjikan baginya?", jawaban: "Tidak ada yang menghalanginya masuk Surga kecuali kematian", pilihan: ["Rezekinya akan dilancarkan seperti air mengalir", "Diselamatkan dari azab kubur", "Tidak ada yang menghalanginya masuk Surga kecuali kematian", "Diangkat derajatnya sebanyak 70 derajat"] },
            { deskripsi: "Shalat Witir adalah penutup shalat malam. Berapakah jumlah rakaat Shalat Witir yang sesuai dengan Sunnah?", jawaban: "Ganjil (1, 3, 5, 7, 9, atau 11 rakaat)", pilihan: ["Hanya boleh 3 rakaat", "Ganjil (1, 3, 5, 7, 9, atau 11 rakaat)", "Genap ditambah satu rakaat di akhir", "Minimal 3 rakaat maksimal 13 rakaat"] },
            { deskripsi: "Rasulullah Ô∑∫ mengabarkan bahwa setiap manusia memiliki 360 persendian yang harus disedekahi setiap harinya. Amalan apa yang dapat mencukupi sedekah untuk 360 persendian tersebut?", jawaban: "Melaksanakan Shalat Dhuha 2 rakaat", pilihan: ["Berinfaq di pagi hari", "Melaksanakan Shalat Dhuha 2 rakaat", "Membaca dzikir pagi dan petang", "Berjalan menuju masjid untuk shalat berjamaah"] },
            { deskripsi: "Bagaimana lafaz doa berbuka puasa yang sesuai dengan ajaran Nabi Ô∑∫ yang dibaca setelah kita meminum/memakan hidangan berbuka?", jawaban: "Dzahabazh zhoma-u wabtallatil 'uruuqu wa tsabatal ajru insya Allah", pilihan: ["Allahumma laka shumtu wa bika aamantu...", "Dzahabazh zhoma-u wabtallatil 'uruuqu wa tsabatal ajru insya Allah", "Allahumma baarik lanaa fii maa razaqtanaa...", "Alhamdulillahilladzi ath'amanii haadzaa..."] },
            { deskripsi: "Laa ilaaha illaa anta subhaanaka innii kuntu minazh zhoolimiin. Ini adalah doa yang dipanjatkan oleh salah seorang Nabi saat beliau berada dalam kesulitan. Siapakah Nabi tersebut?", jawaban: "Nabi Yunus 'alaihissalam", pilihan: ["Nabi Adam 'alaihissalam", "Nabi Nuh 'alaihissalam", "Nabi Ibrahim 'alaihissalam", "Nabi Yunus 'alaihissalam"] },
            { deskripsi: "Allahumma innaka 'afuwwun tuhibbul 'afwa fa'fu'anni. Kapan doa ini paling ditekankan untuk dibaca?", jawaban: "Di malam Lailatul Qadar", pilihan: ["Saat sujud terakhir dalam shalat fardhu", "Saat mendengar petir", "Di malam Lailatul Qadar", "Saat berziarah kubur"] },
            { deskripsi: "Ketika Muadzin mengumandangkan lafaz Hayya 'Alash Shalah dan Hayya 'Alal Falah, apa kalimat yang disunnahkan untuk kita ucapkan sebagai jawabannya?", jawaban: "Laa hawla wa laa quwwata illa billah", pilihan: ["Hayya 'Alash Shalah dan Hayya 'Alal Falah", "Laa hawla wa laa quwwata illa billah", "Allahu Akbar, Allahu Akbar", "Subhanallah walhamdulillah"] },
            { deskripsi: "Apakah hukum puasa Ramadhan bagi seorang musafir (orang yang bepergian jauh)?", jawaban: "Boleh memilih antara tetap berpuasa atau berbuka lalu mengqadhanya di luar Ramadhan", pilihan: ["Wajib tetap berpuasa apa pun kondisinya", "Haram berpuasa karena sedang dalam perjalanan", "Boleh memilih antara tetap berpuasa atau berbuka lalu mengqadhanya di luar Ramadhan", "Boleh berbuka dan tidak perlu mengqadhanya sama sekali"] }
        ];

        // --- Variabel Global ---
        let soalSaatIni; let jawabanBenar = false; let skorBenar = 0; let skorSalah = 0; 
        let soalSudahDitampilkan = new Set(); let nomorSoal = 0; const totalSoal = 15; 
        let timerInterval = null; let timeLeft = 180; // 3 menit
        let isGameOverSoundPlayed = false; let namaUser = "";

        // --- Audio Sederhana ---
        function playSound(type) {
            let src = '';
            if(type === 'start') src = 'ping.wav';
            else if(type === 'success') src = 'success.wav';
            else if(type === 'fail') src = 'gameovertwew.wav';
            else src = type; 
            
            if(src) {
                let audio = new Audio(src);
                audio.play().catch(e => console.log("Audio play prevented:", e));
            }
        }

        function updateTimer() { 
            let minutes = Math.floor(timeLeft / 60); 
            let seconds = timeLeft % 60; 
            const timerEl = document.getElementById("timer");
            timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`; 
            
            if(timeLeft <= 30) timerEl.classList.add("pulse-danger");
            else timerEl.classList.remove("pulse-danger");

            if (timeLeft <= 0) { 
                clearInterval(timerInterval); timerInterval = null; 
                if (nomorSoal < totalSoal) { skorSalah += (totalSoal - nomorSoal); } 
                akhirPermainan(); 
            } else { 
                timeLeft--; 
            } 
        }

        function triggerAnimation(elementId) {
            const el = document.getElementById(elementId);
            el.classList.remove("fade-in-up");
            void el.offsetWidth; // trigger reflow
            el.classList.add("fade-in-up");
        }

        function playLottieAnimation(type) { 
            const container = document.getElementById(type === 'correct' ? 'correctAnimation' : 'wrongAnimation');
            container.style.display = 'block'; container.innerHTML = ''; 
            try { 
                lottie.loadAnimation({ container: container, renderer: 'svg', loop: false, autoplay: true, path: type === 'correct' ? 'correctan.json' : 'wrong.json' }); 
            } catch (e) {} 
            setTimeout(() => { container.style.display = 'none'; }, 2000); 
        }

        function mulaiPermainan() {
            document.getElementById("startScreen").style.display = "none";
            document.getElementById("timerContainer").style.display = "inline-flex";
            
            const judulGameAktif = document.getElementById("judulGameAktif");
            const petunjukSoal = document.getElementById("petunjukSoal");
            const pilihanGanda = document.getElementById("pilihanGanda");
            
            judulGameAktif.style.display = "block";
            petunjukSoal.style.display = "block";
            pilihanGanda.style.display = "flex";
            document.getElementById("skor").style.display = "block";

            if (!timerInterval && timeLeft > 0) { updateTimer(); timerInterval = setInterval(updateTimer, 1000); }

            jawabanBenar = false;
            let soalTersedia = dataTebakan.filter(soal => !soalSudahDitampilkan.has(soal.deskripsi));

            if (soalTersedia.length === 0 || nomorSoal >= totalSoal) { 
                akhirPermainan(); return; 
            }

            nomorSoal++;
            soalSaatIni = soalTersedia[Math.floor(Math.random() * soalTersedia.length)];
            soalSudahDitampilkan.add(soalSaatIni.deskripsi);

            judulGameAktif.textContent = `Soal ${nomorSoal} dari ${totalSoal}`;
            petunjukSoal.textContent = soalSaatIni.deskripsi;
            
            triggerAnimation("judulGameAktif");
            triggerAnimation("petunjukSoal");
            triggerAnimation("pilihanGanda");

            pilihanGanda.innerHTML = '';
            const shuffledPilihan = [...soalSaatIni.pilihan].sort(() => Math.random() - 0.5);

            shuffledPilihan.forEach(pilihanText => {
                const button = document.createElement("button"); 
                button.textContent = pilihanText;
                button.onclick = function() { 
                    if (!jawabanBenar && timeLeft > 0) cekJawaban(pilihanText, button); 
                };
                pilihanGanda.appendChild(button);
            });

            document.getElementById("hasil").textContent = ""; 
            document.getElementById("skorBenar").textContent = skorBenar; 
            document.getElementById("skorSalah").textContent = skorSalah;
        }

        function cekJawaban(jawabanYangDipilih, buttonElement) {
            const pilihanButtons = document.querySelectorAll("#pilihanGanda button"); 
            pilihanButtons.forEach(btn => btn.style.pointerEvents = 'none'); 
            
            if (jawabanYangDipilih === soalSaatIni.jawaban) {
                document.getElementById("hasil").textContent = "‚ú® Jawaban Benar!"; 
                document.getElementById("hasil").style.color = "#51cf66";
                playLottieAnimation('correct'); playSound('success'); 
                jawabanBenar = true; skorBenar++;
                buttonElement.classList.add("benar");
            } else {
                document.getElementById("hasil").textContent = "‚ùå Jawaban Salah!"; 
                document.getElementById("hasil").style.color = "#ff6b6b";
                playLottieAnimation('wrong'); playSound('fail'); 
                skorSalah++;
                buttonElement.classList.add("salah");
                
                pilihanButtons.forEach(btn => { 
                    if (btn.textContent === soalSaatIni.jawaban) btn.classList.add("benar"); 
                });
            }
            
            document.getElementById("skorBenar").textContent = skorBenar;
            document.getElementById("skorSalah").textContent = skorSalah;

            setTimeout(() => { 
                if (nomorSoal < totalSoal && timeLeft > 0) mulaiPermainan(); 
                else akhirPermainan(); 
            }, 2000);
        }

        function akhirPermainan() {
            if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
            if (isGameOverSoundPlayed) return;

            const skorAkhir = totalSoal > 0 ? (skorBenar / totalSoal) * 100 : 0;
            let warnaSkor, komentar, gameOverSoundFile;

            if (skorAkhir < 50) { gameOverSoundFile = 'ast.mp3'; komentar = "Belajar lagi ya.... üòäüìö"; warnaSkor = "#ff6b6b"; }
            else if (skorAkhir <= 84) { gameOverSoundFile = 'alh.mp3'; komentar = "Alhamdulillah, Mantap! üëç"; warnaSkor = "#F5D061"; }
            else { gameOverSoundFile = 'masy.mp3'; komentar = "MasyaAllah, Kamu Luar Biasa! üåüüèÜ"; warnaSkor = "#51cf66"; }

            document.getElementById("judulGameAktif").textContent = "Kuis Selesai!";
            document.getElementById("timerContainer").style.display = "none";
            document.getElementById("skor").style.display = "none";
            document.getElementById("pilihanGanda").style.display = "none";
            document.getElementById("hasil").style.display = "none";

            const petunjuk = document.getElementById("petunjukSoal");
            petunjuk.innerHTML = `
                <div style="font-size: 24px; margin-bottom: 15px;">Alhamdulillah, Terima kasih <b>${namaUser}</b>!</div>
                <div style="font-size: 40px; font-weight: bold; color: ${warnaSkor}; text-shadow: 0 0 10px rgba(0,0,0,0.5); margin: 20px 0;">Nilai: ${skorAkhir.toFixed(0)}</div>
                <div style="font-size: 18px; display: inline-block; text-align: left; background: rgba(0,0,0,0.2); padding: 15px 30px; border-radius: 15px;">
                    ‚úÖ Benar: <b>${skorBenar}</b><br>
                    ‚ùå Salah: <b>${skorSalah}</b>
                </div>
                <div style="margin-top: 20px; font-size: 22px; color: #fff;">${komentar}</div>
            `;
            triggerAnimation("petunjukSoal");

            playSound(gameOverSoundFile); isGameOverSoundPlayed = true;

            // --- PENGIRIMAN DATA KE GOOGLE SHEETS ---
            // PASTI KAN MENGGANTI 'URL_WEB_APP_ANDA' DENGAN URL SCRIPT GOOGLE ANDA
            const scriptURL = 'URL_WEB_APP_ANDA'; 
            if(scriptURL !== 'URL_WEB_APP_ANDA') {
                let dataKuis = { waktu: new Date().toLocaleString('id-ID'), nama: namaUser, skor: skorAkhir.toFixed(0), benar: skorBenar, salah: skorSalah };
                fetch(scriptURL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(dataKuis) })
                .then(() => console.log("Data tersimpan di server")).catch(e => console.error('Error!', e));
            }

            // Tombol Bonus eBook
            const learnBtn = document.createElement("button");
            learnBtn.textContent = "üìñ Bonus e-Book Ramadhan";
            learnBtn.onclick = () => window.location.href = 'https://drive.google.com/file/d/1hWKJqHEpmtaPVIaIVBsbU_2iFRCKIZS6/view';
            Object.assign(learnBtn.style, { fontSize: "18px", padding: "14px 25px", marginTop: "30px", border: "none", borderRadius: "50px", background: "linear-gradient(135deg, #F5D061, #e6b12c)", color: "#1a2a26", cursor: "pointer", fontWeight: "bold", transition: "0.3s", boxShadow: "0 4px 15px rgba(245, 208, 97, 0.4)" });
            learnBtn.onmouseover = () => learnBtn.style.transform = "scale(1.05)";
            learnBtn.onmouseout = () => learnBtn.style.transform = "scale(1)";
            document.getElementById("gameArea").appendChild(learnBtn);
        }

        // --- EVENT MULAI ---
        document.getElementById("startButton").addEventListener("click", () => {
             namaUser = document.getElementById("namaPeserta").value;
             if (namaUser.trim() === "") { alert("Mohon isi nama Anda sebelum mulai!"); return; }

             skorBenar = 0; skorSalah = 0; nomorSoal = 0; soalSudahDitampilkan.clear(); 
             isGameOverSoundPlayed = false; timeLeft = 180; 
             playSound('start');
             mulaiPermainan();
        });
    </script>
</body>
</html>